{% extends "base.html" %}
{% block main %}

<h1>üéÑ –ù–æ–≤–æ–≥–æ–¥–Ω–∏–µ –ø–æ–¥–∞—Ä–∫–∏</h1>

{% block script %}{% endblock %}
<div class="info">
    <div>
        –û—Ç–∫—Ä—ã—Ç–æ: <b id="opened">{{ opened }}</b>/3<br>
        –û—Å—Ç–∞–ª–æ—Å—å –ø–æ–¥–∞—Ä–∫–æ–≤: <b id="remaining">{{ remaining }}</b>
    </div>

    <div>
        {% if is_auth %}
            –í—ã –≤–æ—à–ª–∏ –∫–∞–∫ <b>{{ login }}</b>
            <a href="{{ url_for('lab9.logout') }}">–í—ã–π—Ç–∏</a>
        {% else %}
            <a href="{{ url_for('lab9.login') }}">–í–æ–π—Ç–∏</a> |
            <a href="{{ url_for('lab9.register') }}">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
        {% endif %}
    </div>
</div>

{% if is_auth %}
<button class="reset-btn" onclick="resetGifts()">üéÖ –î–µ–¥ –ú–æ—Ä–æ–∑</button>
{% endif %}

<div class="field">
{% for g in gifts %}
    <div class="gift {% if g.opened %}opened{% endif %}"
         style="top:{{ g.top }}%; left:{{ g.left }}%;"
         onclick="openGift({{ g.id }})">

        <img src="{{ url_for('static', filename='lab9/' ~ g.box) }}">

        {% if g.require_auth and not is_auth %}
            <div class="lock">üîí</div>
        {% endif %}
    </div>
{% endfor %}
</div>

<!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û -->
<div class="modal" id="modal">
    <div class="modal-content">
        <h2>üéÅ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!</h2>
        <img id="modal-image">
        <p id="modal-text"></p>
        <button onclick="closeModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>
</div>

<script>
const OPEN_URL = "{{ url_for('lab9.open_gift') }}";
const RESET_URL = "{{ url_for('lab9.reset') }}";
</script>
<script src="{{ url_for('static', filename='lab9/lab9.js') }}"></script>
<link rel="stylesheet" href="{{ url_for('static', filename='lab9/lab9.css') }}">

{% endblock %}
